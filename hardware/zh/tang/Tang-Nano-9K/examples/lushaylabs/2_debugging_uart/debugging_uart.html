<!DOCTYPE html>

<html lang="zh-CN"  class="">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="keywords" content="FPGA,  Tang,  Nano,  9K">
    
    
    <meta name="description" content="">
    
    <meta name="generator" content="teedoc">
    <meta name="theme" content="teedoc-plugin-theme-default">
    
        
        <meta name="markdown-generator" content="teedoc-plugin-markdown-parser">
        
        <script>
MathJax = {"loader": {"load": ["output/svg"]}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]]}, "svg": {"fontCache": "global"}};
</script>
        
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
        <meta name="html-generator" content="teedoc-plugin-jupyter-notebook-parser">
        
        <meta name="blog-generator" content="teedoc-plugin-blog">
        
        <script src="/static/js/theme_default/pre_main.js"></script>
        
        <link rel="stylesheet" href="/static/css/theme_default/viewer.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/prism.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/dark.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/light.css" type="text/css"/>
        
        <script src="/static/js/theme_default/jquery.min.js"></script>
        
        <script src="/static/js/theme_default/split.js"></script>
        
        <link rel="stylesheet" href="/static/css/search/style.css" type="text/css"/>
        
        <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?9cb07365544a53067c56c346c838181a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
        
            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119047820-5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
  
      gtag('config', 'UA-119047820-5');
    </script>
        
        <link rel="stylesheet" href="/static/css/gitalk/gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/gitalk/custom_gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/custom.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/js/thumbs_up/style.css" type="text/css"/>
        
    
    
    <title>Tang Nano 9K è°ƒè¯• - Sipeed Wiki</title>
    
    <script type="text/javascript">js_vars = {"teedoc-plugin-ad-hint": {"bg_color": "#ffcf89", "bg_color_hover": "#f57c00", "close_color": "#eab971", "color": "#a0421d", "color_hover": "white", "content": "\u65b0\u7248 MaixHub \u5df2\u4e0a\u7ebf\uff0c\u5728\u7ebf\u6807\u6ce8\u3001\u4e00\u952e\u90e8\u7f72\uff0c\u66f4\u7a33\u5b9a\u7684\u7f51\u7edc\u548c\u6d41\u7545\u7684\u4f53\u9a8c\uff0c\u652f\u6301Maix-I, Maix-II, \u624b\u673a, web\uff0c\u003ca href=\u0027https://maixhub.com\u0027\u003e\u5feb\u6765\u4f53\u9a8c\u5427\uff01\u003c/a\u003e\u003c/br\u003e\u6700\u65b0\u5f00\u6e90\u9879\u76ee\u003ca href=\u0027https://github.com/sipeed/TinyMaix\u0027\u003eTinyMaix\u003c/a\u003e\uff0c\u8fd0\u884c\u5728\u4efb\u610f\u5355\u7247\u673a\u4e0a\u7684\u6a21\u578b\u63a8\u7406\u5e93\uff0c\u751a\u81f3\u80fd\u5728\u4f4e\u81f32KiB\u5185\u5b58Arduino\u4e0a\u8dd1", "date": "2022-06-01 14:00", "label": "\u2606", "link_bg_color": "#e6ae5c", "link_color": "#e53935", "show_after_s": 432000, "show_times": 2, "type": "hint"}, "teedoc-plugin-thumbs-up": {"icon": "/static/images/thumbs_up/up.svg", "icon_clicked": "/static/images/thumbs_up/upped.svg", "label_down": "\u6ca1\u5e2e\u52a9", "label_up": "\u6709\u5e2e\u52a9", "msg_already_voted": "\u60a8\u5df2\u7ecf\u6295\u8fc7\u7968\u4e86", "msg_down_prompt": "\u611f\u8c22\u53cd\u9988\uff0c\u8bf7\u544a\u8bc9\u6211\u4eec\u53ef\u4ee5\u6539\u8fdb\u4ec0\u4e48\u5730\u65b9?\uff08\u6700\u5c11 10 \u4e2a\u5b57\uff09", "msg_down_prompt_error": "\u6d88\u606f\u6700\u5c11\u9700\u8981 10 \u4e2a\u5b57\uff0c \u6700\u591a 256 \u4e2a\u5b57", "msg_error": "\u8bf7\u6c42\u670d\u52a1\u5668\u51fa\u73b0\u9519\u8bef!", "msg_thanks": "\u611f\u8c22\u60a8\u7684\u53cd\u9988", "show_down_count": false, "show_up_count": true, "url": "https://thumbs-up.sipeed.com"}}</script>
</head>


<body class="type_doc">
    
    <div id="navbar">
        <div id="navbar_menu">
            <a class="site_title" href="/">
                
                    <img class="site_logo" src="/static/image/logo.svg" alt="sipeed wiki logo">
                
                
                    <h2>wiki</h2>
                
        </a>
            <a id="navbar_menu_btn"></a>
        </div>
        <div id="navbar_items">
            <div>
                <ul id="nav_left">
<li class="active"><a  href="/hardware/zh/index.html">äº§å“</a></li>
<li class="sub_items "><a >è½¯ä»¶æ–‡æ¡£</a><ul><li class=""><a  href="/soft/maixpy/zh/index.html">MaixPy</a></li>
<li class=""><a  href="/soft/maixpy3/zh/index.html">MaixPy3</a></li>
<li class=""><a  href="/soft/Lichee/zh/index.html">Lichee</a></li>
<li class=""><a  href="/ai/zh/index.html">AI æŒ‡å—</a></li>
</ul>
</li>
<li class="sub_items "><a >åœ¨çº¿ç½‘ç«™</a><ul><li class=""><a target="_blank" href="https://maixhub.com">MaixHub: AI è®­ç»ƒå’Œåˆ†äº«å¹³å°</a></li>
<li class=""><a target="_blank" href="https://dl.sipeed.com/">ä¸‹è½½ä¸­å¿ƒ</a></li>
</ul>
</li>
<li class=""><a  href="/community.html">äº¤æµç¤¾ç¾¤</a></li>
<li class=""><a  href="/news/">åšæ–‡ç²¾é€‰</a></li>
<li class=""><a  href="/store.html">çº¿ä¸Šå•†åŸ</a></li>
</ul>

            </div>
            <div>
                <ul id="nav_right">
<li class=""><a  href="/share_docs/zh/">è´¡çŒ®æ–‡æ¡£</a></li>
<li class=""><a target="_blank" href="https://github.com/sipeed">Github </a></li>
<li class="sub_items "><a  href="">Language: ä¸­æ–‡ ç®€ä½“</a><ul><li class=""><a  href="/hardware/en/">English</a></li>
<li class="active"><a  href="/hardware/zh/">ä¸­æ–‡ ç®€ä½“</a></li>
</ul></li>
</ul>

                <ul class="nav_plugins"><li><a id="google_translate_element"><img class="icon" src="/static/image/google_translate/translate.svg"/>Translate</a></li></ul><ul class="nav_plugins"><li><a id="themes" class="light"></a></li></ul><ul class="nav_plugins"><li><a id="search"><span class="icon"></span><span class="placeholder">æœç´¢</span>
                            <div id="search_hints">
                                <span id="search_input_hint">è¾“å…¥å…³é”®è¯ï¼Œå¤šå…³é”®è¯ç©ºæ ¼éš”å¼€</span>
                                <span id="search_loading_hint">æ­£åœ¨åŠ è½½ï¼Œè¯·ç¨å€™ã€‚ã€‚ã€‚</span>
                                <span id="search_download_err_hint">ä¸‹è½½æ–‡ä»¶å¤±è´¥ï¼Œè¯·åˆ·æ–°é‡è¯•æˆ–æ£€æŸ¥ç½‘ç»œ</span>
                                <span id="search_other_docs_result_hint">æ¥è‡ªå…¶å®ƒæ–‡æ¡£çš„ç»“æœ</span>
                                <span id="search_curr_doc_result_hint">å½“å‰æ–‡æ¡£æœç´¢ç»“æœ</span>
                            </div></a></li></ul>
            </div>
        </div>
    </div>
    
    <div id="wrapper">
        <div id="sidebar_wrapper">
            <div id="sidebar">
                <div id="sidebar_title">
                    
                </div>
                <ul class="">
<li class="not_active with_link"><a href="/hardware/zh/index.html"><span class="label">äº§å“æ€»è§ˆ</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">Maix Zero</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active no_link"><a><span class="label">Maix M0</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/./maixzero/sense/maix_zero_sense.html"><span class="label">M0sense å¼€å‘æ¿</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/./maixzero/sense/start.html"><span class="label">M0sense åŸºç¡€ä½¿ç”¨</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Maix M0P</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/./maixzero/m0p/m0p.html"><span class="label">M0P</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/./maixzero/m0p/m0p_dock.html"><span class="label">M0P Dock</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/hardware/zh/./maixzero/m0s/m0s.html"><span class="label">Maix M0S</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Maix-I</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active no_link"><a><span class="label">Maix M1</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active no_link"><a><span class="label">M1 æ¨¡å—</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/maix/core_module.html"><span class="label">M1/M1w</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maix/M1n.html"><span class="label">M1n</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">M1 å¼€å‘æ¿</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/maix/maixpy_develop_kit_board/maix_bit.html"><span class="label">Maix Bit</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maix/maixpy_develop_kit_board/Maix_dock.html"><span class="label">Maix Dock(M1/M1W)</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maix/maixpy_develop_kit_board/maix_duino.html"><span class="label">Maix Duino</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maix/maixpy_develop_kit_board/maix_nano.html"><span class="label">Maix Nano</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maix/maixpy_develop_kit_board/maix_cube.html"><span class="label">Maix Cube</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maix/maixpy_develop_kit_board/maix_Amigo.html"><span class="label">Maix Amigo</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maix/maixpy_develop_kit_board/maix_hat.html"><span class="label">Maix HAT</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maix/maixpy_develop_kit_board/maix_go.html"><span class="label">Maix Goï¼ˆå”®ç½„ï¼‰</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Maix M1s</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/maix/m1s/m1s_module.html"><span class="label">M1s æ¨¡å—</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">M1s å¼€å‘æ¿</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/maix/m1s/m1s_dock.html"><span class="label">ç®€ä»‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maix/m1s/other/start.html"><span class="label">ä¸Šæ‰‹ä½¿ç”¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maix/m1s/other/others.html"><span class="label">å…¶ä»–äº‹é¡¹ï¼ˆæ‘„åƒå¤´å’Œå¤–å£³ï¼‰</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Maix M1a</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
</ul>
</li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Maix-II</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/maixII/M2/resources.html"><span class="label">MaixII-Dock</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/maixII/M2/flash.html"><span class="label">çƒ§å½•ç³»ç»Ÿ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maixII/M2/usage.html"><span class="label">åŸºç¡€ä½¿ç”¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maixII/M2/other.html"><span class="label">å…¶ä»–äº‹é¡¹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/../../soft/maixpy3/zh/tools/0.MaixII-Dock.html"><span class="label">è¿æ¥MaixPy3</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/hardware/zh/maixII/M2S/V833.html"><span class="label">MaixII-S</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/maixII/M2S/reources.html"><span class="label">æ¿çº§èµ„æºä»‹ç»</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/hardware/zh/maixII/M2A/maixsense.html"><span class="label">MaixII-Sense</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/maixII/M2A/flash_system.html"><span class="label">çƒ§å½•ç³»ç»Ÿ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maixII/M2A/config_system.html"><span class="label">é…ç½®ç³»ç»Ÿ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maixII/M2A/Usages.html"><span class="label">åŸºæœ¬ä½¿ç”¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/../../soft/maixpy3/zh/tools/maixsense.html"><span class="label">è¿æ¥MaixPy3</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Maix-III</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/maixIII/ax-pi/axpi.html"><span class="label">Maix-III AXera-Pi</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/maixIII/ax-pi/flash_system.html"><span class="label">äº§å“ä¸Šæ‰‹æŒ‡å—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maixIII/ax-pi/basic_usage.html"><span class="label">ç³»ç»Ÿä½¿ç”¨æ‰‹å†Œ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maixIII/ax-pi/python_api.html"><span class="label">è¯•è¯• Python ç¼–ç¨‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maixIII/ax-pi/dev_prepare.html"><span class="label">å¼€å§‹ C/C++ ç¼–ç¨‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/ai/zh/deploy/ax-pi.html" ><span class="label">AI å¼€å‘æŒ‡å—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maixIII/ax-pi/faq_axpi.html"><span class="label">å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">LicheePi</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active no_link"><a><span class="label">LicheePI 4A</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/lichee/th1520/lm4a.html"><span class="label">Lichee Module 4A</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">Lichee PI 4A</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/lichee/th1520/lpi4a/1_intro.html"><span class="label">æ¿å¡ä»‹ç»</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/th1520/lpi4a/2_unbox.html"><span class="label">å¼€ç®±ä½“éªŒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/th1520/lpi4a/3_images.html"><span class="label">é•œåƒé›†åˆ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/th1520/lpi4a/4_burn_image.html"><span class="label">çƒ§å½•é•œåƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/th1520/lpi4a/5_desktop.html"><span class="label">æ¡Œé¢ç³»ç»ŸåŸºç¡€ä½¿ç”¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/th1520/lpi4a/6_peripheral.html"><span class="label">å¤–è®¾ä½¿ç”¨</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">ç³»ç»Ÿå¼€å‘</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/lichee/th1520/lpi4a/7_develop_thead.html"><span class="label">THead Yocto</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">Linux ä¸»çº¿ (ç¼–å†™ä¸­)</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">Android (ç¼–å†™ä¸­)</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">å…¶ä»–</span><span class="sub_indicator"></span></a><ul class="show">
</ul>
</li>
</ul>
</li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/th1520/lpi4a/8_application.html"><span class="label">å…¸å‹åº”ç”¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/th1520/lpi4a/9_benchmark.html"><span class="label">CPU è·‘åˆ†æµ‹è¯•</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/th1520/lpi4a/10_test_report.html"><span class="label">ç¡¬ä»¶æµ‹è¯•æŠ¥å‘Š</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/th1520/lpi4a/11_credits.html"><span class="label">è‡´è°¢</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">LicheePI RV</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active no_link"><a><span class="label">æ¿å¡ä»‹ç»</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/hardware/zh/lichee/RV/RV.html"><span class="label">LicheePI RV</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/RV/86_panel.html"><span class="label">LicheePI RV 86 Panel</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/RV/Dock.html"><span class="label">LicheePI RV Dock</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/RV/flash.html"><span class="label">çƒ§å½•ç³»ç»Ÿ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/RV/user.html"><span class="label">åŸºç¡€ä¸Šæ‰‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/RV/problems.html"><span class="label">å¸¸è§é—®é¢˜</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/RV/ubuntu.html"><span class="label">ä½¿ç”¨ Ubuntu é•œåƒ</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/Zero/Zero.html"><span class="label">LicheePI Zero</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/Nano/Nano.html"><span class="label">LicheePI Nano</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/lichee/ZeroPlus/ZeroPlus.html"><span class="label">LicheePI ZeroPlus</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Tang FPGA</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active no_link"><a><span class="label">Tang Nano</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/tang/Tang-Nano-1K/Nano-1k.html"><span class="label">Tang Nano 1K</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/tang/Tang-Nano-4K/Nano-4K.html"><span class="label">Tang Nano 4k</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/tang/Tang-Nano-9K/Nano-9K.html"><span class="label">Tang Nano 9K</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/tang/tang-nano-20k/nano-20k.html"><span class="label">Tang Nano 20K</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/tang/Tang-Nano/Nano.html"><span class="label">Tang Nano (å”®ç½„)</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/tang/Tang-Nano-Doc/get_started/install-the-ide.html"><span class="label">å®‰è£… IDE</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/tang/Tang-Nano-Doc/examples.html"><span class="label">ç›¸å…³ä¾‹ç¨‹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/tang/Tang-Nano-Doc/questions.html"><span class="label">å¸¸è§é—®é¢˜</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Tang Primer</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active no_link"><a><span class="label">Tang Primer 20K</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/tang/tang-primer-20k/primer-20k.html"><span class="label">æ¿å¡ä»‹ç»</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/tang/tang-primer-20k/start.html"><span class="label">å¼€ç®±æŒ‡å—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/tang/Tang-Nano-Doc/get_started/install-the-ide.html"><span class="label">å®‰è£… IDE</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/tang/tang-primer-20k/example.html"><span class="label">ä¾‹ç¨‹æŒ‡å—</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/tang/Tang-Nano-Doc/questions.html"><span class="label">å¸¸è§é—®é¢˜</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/hardware/zh/tang/Tang-primer/Tang-primer.html"><span class="label">Tang Primer (å”®ç½„)</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/tang/Tang-primer/index.html"><span class="label">æ¿å¡ä»‹ç»</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">å®‰è£… TD</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/tang/Tang-primer/get_started/install_TD_win.html"><span class="label">Windowså®‰è£…TD</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/no_translate.html?ref=tang/Tang-primer/get_started/install_linux.html&from=/hardware/zh/tang/Tang-primer/get_started/install_linux.html"><span class="label">Linuxå®‰è£…TD</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/hardware/zh/tang/Tang-primer/fpga/led.html"><span class="label">ä½¿ç”¨FPGAç‚¹ç¯</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/tang/Tang-primer/get_started/E203.html"><span class="label">æ­å»ºèœ‚é¸Ÿå¼€å‘ç¯å¢ƒ</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/tang/Tang-primer/get_started/fpga_download.html"><span class="label">FPGAç æµçƒ§å½•</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Tang Mega</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/hardware/zh/maixsense/index.html"><span class="label">MaixSense</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/maixsense/maixsense-a010/maixsense-a010.html"><span class="label">MaixSense-a010</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/maixsense/maixsense-a075v/maixsense-a075v.html"><span class="label">MaixSense-a075v</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Maix Audio</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active no_link"><a><span class="label">MA USB 16</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">SLogic</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active no_link"><a><span class="label">SLogic Combo8</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">Longon</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/longan/Nano/Longan_nano.html"><span class="label">Longon Nano</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/hardware/zh/longan/Nano/get_started/pio.html"><span class="label">PIOé…ç½®</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/longan/Nano/get_started/blink.html"><span class="label">ç‚¹ç¯æµ‹è¯•</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/longan/Nano/get_started/debug.html"><span class="label">DEBUG è°ƒè¯•</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/longan/Nano/get_started/sipeed-debugger.html"><span class="label">ä½¿ç”¨ Sipeed è°ƒè¯•å™¨</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/longan/Nano/get_started/rv-link.html"><span class="label">ä½¿ç”¨ RV-LINK</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">ç¤ºä¾‹</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/longan/Nano/examples/printf.html"><span class="label">ä¸²å£è¾“å‡º</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/longan/Nano/examples/badapple.html"><span class="label">æ’­æ”¾ Badapple</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">MaixFace</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/maixface/mfst40/mfst40.html"><span class="label">MF-ST40 äººè„¸è¯†åˆ«æ¨¡å—</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">MF èµ„æ–™</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/maixface/mf_ml_module/mf_precautions.html"><span class="label">MF äººè„¸è¯†åˆ«æ¨¡å— PCB è®¾è®¡æ³¨æ„äº‹é¡¹</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="https://github.com/sipeed/MF1-User-Manual" ><span class="label">ç‚¹æˆ‘å‰å¾€ github æŸ¥çœ‹å…¨éƒ¨èµ„æ–™</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">å¤–è®¾æ¨¡ç»„</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active no_link"><a><span class="label">SP-MODå¤–è®¾æ¨¡ç»„</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active no_link"><a><span class="label">è½¬æ¥æ¿ç±»</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/hardware/zh/modules_spmod/spmod_extender.html"><span class="label">SP-Extender</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/modules_spmod/spmod_grove.html"><span class="label">SP-Grove</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/modules_spmod/spmod_fpc.html"><span class="label">SP-FPC</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/modules_spmod/spmod_micarray.html"><span class="label">SP-MicArray</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/modules_spmod/spmod_joystick.html"><span class="label">SP-JotStick</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/modules_spmod/spmod_servo.html"><span class="label">SP-Servo</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/.html"><span class="label">SP-TypeC</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">ä¼ æ„Ÿå™¨ç±»</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/hardware/zh/modules_spmod/spmod_weather.html"><span class="label">SP-Weather</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/modules_spmod/spmod_tof.html"><span class="label">SP-TOF-1P</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">é€šä¿¡ç±»</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/hardware/zh/modules_spmod/spmod_bt.html"><span class="label">SP-BT</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/modules_spmod/spmod_lora.html"><span class="label">SP-LoRa</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/modules_spmod/spmod_psram.html"><span class="label">SP-PSRAM</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/modules_spmod/spmod_rfid.html"><span class="label">SP-RFID</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/modules_spmod/spmod_ethernet.html"><span class="label">SP-Ethernet</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">æ˜¾ç¤ºç±»</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/hardware/zh/modules_spmod/spmod_lcd1.14.html"><span class="label">SP-LCD 1.14</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/hardware/zh/modules_spmod/spmod_eink.html"><span class="label">SP-Eink</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="not_active no_link"><a><span class="label">æ¨¡å— & è°ƒè¯•å™¨</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/modules/debugger_and_uart.html"><span class="label">è°ƒè¯•å™¨ & ä¸²å£æ¨¡å—</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">æ¨¡å—</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/hardware/zh/modules/camera_summary.html"><span class="label">æ‘„åƒå¤´</span><span class=""></span></a></li>
<li class="not_active no_link"><a><span class="label">éº¦å…‹é£æ¨¡å—</span><span class="sub_indicator sub_indicator_collapsed"></span></a><ul class="">
<li class="not_active with_link"><a href="/hardware/zh/modules/micarray.html"><span class="label">éº¦å…‹é£é˜µåˆ—</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active with_link"><a href="/hardware/zh/modules/Gamepad.html"><span class="label">Sipeed Gamepad</span><span class=""></span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            </div>
        </div>
        <div id="article">
            <div id="menu_wrapper">
                <div id="menu">
                </div>
            </div>
            <div id="content_wrapper">
                <div id="content_body">
                    <div id="article_head">
                        <div id="article_title">
                            
                            <h1>Tang Nano 9K è°ƒè¯•</h1>
                            
                        </div>
                        <div id="article_tags">
                            <ul>
                            
                            </ul>
                        </div>
                        <div id="article_info">
                        <div id="article_info_left">
                            <span class="article_author">
                                
                            </span>
                            
                                <span class="article_date" title="æœ€åä¿®æ”¹æ—¥æœŸï¼š 2023-02-14">
                                    2023-02-14
                                </span>
                            
                        </div>
                        <div id="article_info_right">
                            
                            <div id="source_link">
                                <a href="https://github.com/sipeed/sipeed_wiki/blob/main/docs/hardware/zh/tang/Tang-Nano-9K/examples/lushaylabs/2_debugging_uart/debugging_uart.md" target="_blank">
                                    ç¼–è¾‘æœ¬é¡µ
                                </a>
                            </div>
                            
                        </div>
                        </div>
                    </div>
                    <div id="article_tools">
                        <span></span>
                        <span id="toc_btn"></span>
                    </div>
                    <div id="update_history">
                        
                        
                        <details open>
                        
                            <summary>æ›´æ–°å†å²</summary>
                            <div>
                                <table>
                                        <thead>
                                            <tr>
                                                <th>æ—¥æœŸ</th>
                                                <th>ç‰ˆæœ¬</th>
                                                <th>ä½œè€…</th>
                                                <th>æ›´æ–°å†…å®¹</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            
                                                <tr>
                                                    <td>2023-02-14</td>
                                                    <td>v0.1</td>
                                                    <td>wonder</td>
                                                    <td>
                                                    
                                                        <ul>
                                                        
                                                            <li>æ–°å»ºæ–‡æ¡£</li>
                                                        
                                                        </ul>
                                                    
                                                    </td>
                                                </tr>
                                            
                                        </tbody>
                                </table>
                            </div>
                        </details>
                        
                    </div>
                    <div id="article_content">
                        
                            <p><a href="https://learn.lushaylabs.com/tang-nano-9k-debugging/"  target="_blank">åŸæ–‡é“¾æ¥</a></p>
<blockquote>
<p>This is the second article in our series on the Tang Nano 9K, the first section on getting your development environment setup can be found <a href="./../1_installation_getting_started/installation_getting_started.html"  >here</a>.</p>
</blockquote>
<p>When programming FPGAs or really any embedded system you usually have a lot less visibility into whats going on, in comparison to programming for computers. When everything works its great, but more times then not you won't get your design perfect on the first try and not having this visibility can make it hard to troubleshoot.</p>
<p>In this article we will go through some of the different ways to debug an FPGA project as-well as cover some of the more common issues, so if you do run into an issue you will know how to overcome it. We will also be building a UART module which will use the on-board RV debugger built into the Tang Nano 9K (<a href="https://item.taobao.com/item.htm?id=666055424174"  target="_blank">ğŸ”ŒğŸ”Œ</a>) to communicate with a computer serially.</p>
<h2 id="Classifying-the-Type-of-Bug">Classifying the Type of Bug</h2>
<p>To efficiently debug an issue, like in most things, it works best when you use the right tool for the job. Different types of bugs have different tools which can help to find them. From my experience you can usually categorize bugs into three main categories:</p>
<ol>
    <li>Syntax Errors</li>
    <li>Logic / Implementation Errors</li>
    <li>Integration Errors.</li>
</ol>
<h3 id="Syntax-Errors">Syntax Errors</h3>
<p>This is the type of error where you mistyped, forgot to close a block, misused a verilog feature etc... All these kinds of issues are the least severe in my opinion, as they are brought up during the synthesis stage while compiling your design and you will usually get an exact file and line number. So even if the error message is not that clear, you still have the exact location of the problem which makes it easy to fix. We won't go too much into this type of bugs as like I mentioned you will immediately know about this kind of bug during syntheses - if not before from the editor itself.</p>
<h3 id="Logic-/-Implementation-Errors">Logic / Implementation Errors</h3>
<p>Logic errors are the types of errors where you had a flaw in your original design, maybe you forgot to handle edge cases or had a mistake in your original plan.</p>
<p>Implementation errors are the flip-side of this, where your design was actually solid, but the code written doesn't actually do what you intended.</p>
<p>Both these kinds of issues are a bit harder to catch, since you won't receive any error message. The only indication you will have is that your project doesn't work as intended.</p>
<p>In these situations though, we are talking about cases where you understand and know how it is meant to perform. For these cases we can use simulations and visual logic debugging with VCD files to see what our design is doing over time and track down at which stage there is a problem. We will cover both of these method below.</p>
<h3 id="Integration-Errors">Integration Errors</h3>
<p>Integrations errors are errors that occur only when run on the actual FPGA and are usually because of misunderstanding, or not fulling knowing how to interface with another device or a specific protocol.</p>
<p>These types of errors are the most difficult to find as they are due to a 3rd party device or from missing information. For example if we were making an FPGA core which reads from a temperature sensor that has an 8-bit temperature value, if we thought the temperature IC returned a 10-bit value and tried to read that we would get incorrect results. This is especially hard to track down, as if you thought a device was 10-bit instead of 8-bit, you would have also made it 10-bit in the simulator in which case it would have passed.</p>
<p>To find these kinds of issues you need methods to debug the FPGA while it is running, these methods include making use of the on-board LEDs, UART communication during runtime or even logic analyzers / oscilloscopes, we will go over using the on-board LEDs to display data as-well as sending things from the FPGA to the computer over UART.</p>
<h2 id="UART">UART</h2>
<p>In-order to use the onboard UART debugger we need to implement our own UART transmitter and receiver modules, which gives us a good test case to go through all the debugging methods listed above.</p>
<p>But before we get into the implementation, let's go over the protocol itself so we understand what we are going to be doing.</p>
<h3 id="The-Protocol">The Protocol</h3>
<p>With UART you send data from one device to another over a single wire. You send 1 start bit of data, then an agreed upon amount of data bits (usually 8) and finally a stop bit. There are some more complex configurations, like multiple stop bits, or adding a parity bit as a checksum. But in our case we will be looking at the simple case of 1 start bit, 8 data bits and a stop bit. The data is transferred least significant bit first. Â </p>
<p>Example sending the byte 01010101 or 85 in decimal:</p>
<p><img src="./assets/uart_2.jpg" alt="uart_2" /></p>
<p>There is no clock signal to synchronize both sides like in some other common protocols here both sides need to agree in advance on a frequency or &quot;baud rate&quot; which is the amount of bits per second and then each side needs to manage their own clocks to meet the desired frequency.</p>
<p>Because there is no common clock, one side cannot react to the &quot;rising edge&quot; for example of the other sides clock, and there may be some drift between the two devices not to mention that they might have completely different clock speeds which don't exactly line up with the baud rate. So because of this we want the receiver to be able to run at least 8-16 times faster then the agreed upon baud rate. That way the &quot;latest&quot; the receiver would realize the transmission started would be an 1/8th or 1/16th of the bit rate in, and so even if there is a drift due to the different clocks, you should still be able to read all 10-bits of the transmission successfully.</p>
<p>The UART on the Tang Nano 9K runs in full-duplex mode which means it uses two lines like the one above, allowing for each to device to both send and receive data at the same time. Other than the direction, the protocol is exactly the same for both directions, there is no single side which acts as the controller or schedules when to send or receive they both can decide to send data whenever they want over the appropriate line.</p>
<h3 id="The-Implementation">The Implementation</h3>
<p>For this project we will need to connect to the onboard debugger's UART pins, which will transfer the UART data we send it to the computer over USB. So lets start with the constraints file. In a new project let's create a file called <code>tangnano9k.cst</code></p>

<pre class="language-v"><code class="language-v">IO_LOC &quot;clk&quot; 52;
IO_PORT &quot;clk&quot; PULL_MODE=UP;
IO_LOC &quot;led[0]&quot; 10;
IO_LOC &quot;led[1]&quot; 11;
IO_LOC &quot;led[2]&quot; 13;
IO_LOC &quot;led[3]&quot; 14;
IO_LOC &quot;led[4]&quot; 15;
IO_LOC &quot;led[5]&quot; 16;
IO_LOC &quot;btn1&quot; 3;

IO_LOC &quot;uart_tx&quot; 17;
IO_PORT &quot;uart_tx&quot; IO_TYPE=LVCMOS33;
IO_LOC &quot;uart_rx&quot; 18;
IO_PORT &quot;uart_rx&quot; IO_TYPE=LVCMOS33;
</code></pre>
<p>The clock and leds are the same as in the previous article's counter example. The btn <code>pin</code> is connected to the onboard button so that we can use it for sending data and the <code>rx</code> and <code>tx</code> pins of the uart are pins 17 and 18 from bank 2 of the FPGA. We will receive data from the computer over pin 17 <code>rx</code> and we will send data over pin 18 <code>tx</code>.</p>
<p><img src="./assets/uart_pins_1.jpg" alt="uart_pins_1" /></p>
<p>You have to follow their path a bit in the schematic, but you can see that these two pins end up going to the BL702 which is the onboard Sipeed debugger.</p>
<p>Another thing to notice about the buttons is that it is connected to 1.8V on idle through a 10K pull-up, and is pulled low when pressed. So when using it we need to remember it is an active low signal.</p>
<p><img src="./assets/button.jpg" alt="button" /></p>
<p>Now that we have the constraints file, lets setup our verilog file <code>uart.v</code>:</p>

<pre class="language-v"><code class="language-v">`default_nettype none

module uart
#(
    parameter DELAY_FRAMES = 234 // 27,000,000 (27Mhz) / 115200 Baud rate
)
(
    input clk,
    input uart_rx,
    output uart_tx,
    output reg [5:0] led,
    input btn1
);

    localparam HALF_DELAY_WAIT = (DELAY_FRAMES / 2);

endmodule
</code></pre>
<p>Here we are declaring a new module which receives the clock pin, uart receive and transmit pins, the leds and the button we configured. The brackets that go before the inputs is an optional section where you can define parameters that can be changed by files that use this module. They are like <code>localparam</code>s that we used in the previous article just configurable from the outside. In our case we have 1 parameter of this type called <code>DELAY_FRAMES</code> which is the number of clock pulses needed to reach the desired baud rate. In our example we will use one of the standard baud rates of 115200 bits per second, dividing the 27Mhz by this number of bits gives us a number a little higher than 234. So each transmission bit should take a bit over 234 clock pulses.</p>
<p>The thing is we don't really want to measure exactly at the bit transition, because like we saw there can be a bit of drift between the clocks, and we are also not exactly counting the correct number of pulses (we would need an extra 0.375 clock pulses for each bit). The safer option is to read the bit directly in what we consider the middle of the bit pulse, that way if we are a bit early or a bit late in terms of clock pulses we will still fall into the correct bit and read the correct value.</p>
<p>That is why we have another <code>localparam</code> which is simply the full <code>DELAY_FRAMES</code> divided by two so we can get to the middle of these pulses.</p>
<p>Next we will need some registers:</p>

<pre class="language-v"><code class="language-v">reg [3:0] rxState = 0;
reg [12:0] rxCounter = 0;
reg [2:0] rxBitNumber = 0;
reg [7:0] dataIn = 0;
reg byteReady = 0;
</code></pre>
<p>The FPGA doesn't do the same thing every clock pulse like in the example of the counter from the previous article. Here we need to remember where we are in the UART cycle and react accordingly, a common way of doing this is with a state machine. That way we can start in an &quot;idle&quot; state when we see the start bit we can start receiving data and go to the &quot;read data&quot; state and then once we finish the bit we can go to the &quot;stop bit&quot; state finally returning back to &quot;idle&quot; ready to receive the next communication.</p>
<p>The <code>rxState</code> register can hold in-which state we currently are in. Next we know we need to count clock pulses (as we saw 234 clock pulses is 1 UART bit frame) so we have another register <code>rxCounter</code> for counting clock pulses. Next we have <code>rxBitNumber</code> which can keep track of how many bits we have read so far, this way we can know when the data is finished and when we will be moving to the stop bit. The next register is an 8-bit register which will store the byte received, and finally we have <code>byteReady</code> which is a flag register that will tell us when we have finished reading a byte and the value of <code>dataIn</code> is valid to use.</p>
<p>Next let's define which states our state machine will have.</p>

<pre class="language-v"><code class="language-v">localparam RX_STATE_IDLE = 0;
localparam RX_STATE_START_BIT = 1;
localparam RX_STATE_READ_WAIT = 2;
localparam RX_STATE_READ = 3;
localparam RX_STATE_STOP_BIT = 5;
</code></pre>
<p>Like mentioned above, we start in an idle stage, when there is a start bit we need to wait a certain amount of time, then 8 times we can alternate between reading a bit, and waiting for the next bit. Finally we have a state for the stop bit so we can again wait for it to complete and go back to being idle.</p>
<p>I will first show the complete implementation and then we can go through each of the states to explain them:</p>

<pre class="language-v"><code class="language-v">always @(posedge clk) begin
    case (rxState)
        RX_STATE_IDLE: begin
            if (uart_rx == 0) begin
                rxState &lt;= RX_STATE_START_BIT;
                rxCounter &lt;= 1;
                rxBitNumber &lt;= 0;
                byteReady &lt;= 0;
            end
        end 
        RX_STATE_START_BIT: begin
            if (rxCounter == HALF_DELAY_WAIT) begin
                rxState &lt;= RX_STATE_READ_WAIT;
                rxCounter &lt;= 1;
            end else 
                rxCounter &lt;= rxCounter + 1;
        end
        RX_STATE_READ_WAIT: begin
            rxCounter &lt;= rxCounter + 1;
            if ((rxCounter + 1) == DELAY_FRAMES) begin
                rxState &lt;= RX_STATE_READ;
            end
        end
        RX_STATE_READ: begin
            rxCounter &lt;= 1;
            dataIn &lt;= {uart_rx, dataIn[7:1]};
            rxBitNumber &lt;= rxBitNumber + 1;
            if (rxBitNumber == 3'b111)
                rxState &lt;= RX_STATE_STOP_BIT;
            else
                rxState &lt;= RX_STATE_READ_WAIT;
        end
        RX_STATE_STOP_BIT: begin
            rxCounter &lt;= rxCounter + 1;
            if ((rxCounter + 1) == DELAY_FRAMES) begin
                rxState &lt;= RX_STATE_IDLE;
                rxCounter &lt;= 0;
                byteReady &lt;= 1;
            end
        end
    endcase
end
</code></pre>
<h3 id="The-UART-Receiver-States">The UART Receiver States</h3>
<p>The first state is the idle state:</p>

<pre class="language-v"><code class="language-v">RX_STATE_IDLE: begin
   if (uart_rx == 0) begin
      rxState &lt;= RX_STATE_START_BIT;
      rxCounter &lt;= 1;
      rxBitNumber &lt;= 0;
      byteReady &lt;= 0;
   end
end
</code></pre>
<p>Here we have nothing to do, we are just waiting for the UART <code>rx</code> line to be pulled low signifying a start bit. If the line has been pulled low, we set the counter to be equal to 1 to include the current &quot;clock pulse&quot; in the UART bit frame and we reinitialize the bitNumber and set the <code>byteReady</code> flag back to zero to signify that the <code>dataIn</code> register should not be used as we are in the middle of reading data to it.</p>

<pre class="language-v"><code class="language-v">RX_STATE_START_BIT: begin
   if (rxCounter == HALF_DELAY_WAIT) begin
        rxState &lt;= RX_STATE_READ_WAIT;
        rxCounter &lt;= 1;
   end else 
        rxCounter &lt;= rxCounter + 1;
end
</code></pre>
<p>We would like to read the data in the middle of each uart bit, so during the start bit we won't wait a complete bit frame and then read, we will wait a half bit frame and then every 1 uart bit (234 clock pulses) we can read so we will be exactly in the middle. Here we are initializing the counter to 1 since registers take an extra clock pulse to update, so we account for that 1 pulse.</p>

<pre class="language-v"><code class="language-v">RX_STATE_READ_WAIT: begin
    rxCounter &lt;= rxCounter + 1;
    if ((rxCounter + 1) == DELAY_FRAMES) begin
        rxState &lt;= RX_STATE_READ;
    end
end
</code></pre>
<p>This next stage is merely waiting the 234 clock pulses for the next bit we can read. Since we are already have a half uart bit offset from the previous state we will be in the middle of the signal ready to read after this. Here we are using another method to account for the register delay, we can add 1 when comparing.</p>

<pre class="language-v"><code class="language-v">RX_STATE_READ: begin
   rxCounter &lt;= 1;
   dataIn &lt;= {uart_rx, dataIn[7:1]};
   rxBitNumber &lt;= rxBitNumber + 1;
   if (rxBitNumber == 3'b111)
      rxState &lt;= RX_STATE_STOP_BIT;
   else
      rxState &lt;= RX_STATE_READ_WAIT;
end
</code></pre>
<p>In the read state we are clearing the counter to 1, shifting one bit into the dataIn register, incrementing the bitCounter so we can keep track of how many bits we have read so far. If we are already on <code>rxBitNumber</code> 7 or 111 in binary we can go to the stop bit and the entire byte has been read, if not we can go back to the read wait state and wait for the next bit.</p>
<p>This syntax for bit shifting is actually syntax for concatenating bits. You can use it for example to set a register, the order of the bits is from most significant to least significant. So for example if we do the following:</p>

<pre class="language-v"><code class="language-v">reg [4:0] demo = {1'b1,1'b0,2'b110}
</code></pre>
<p>It would store 10110 in binary or 22 in decimal. In our example we are doing the following:</p>

<pre class="language-v"><code class="language-v">dataIn &lt;= {uart_rx, dataIn[7:1]};
</code></pre>
<p>Which means the new bit will be placed as the most significant bit, and then we will take the top 7 bits as the first seven bits, essentially moving them all one over, losing the bit at index 0. Internally this creates what is called a shift-register since the output of the last bit (bit 7) is connected to the input of bit 6, and bit 6's output is connected to the input of bit 5, etc. Since UART sends the data least significant bit first, we shift the bits in from the most significant bit, so that after shifting 8 times it will end up at the other side and be the least significant bit.</p>

<pre class="language-v"><code class="language-v">RX_STATE_STOP_BIT: begin
   rxCounter &lt;= rxCounter + 1;
   if ((rxCounter + 1) == DELAY_FRAMES) begin
      rxState &lt;= RX_STATE_IDLE;
      rxCounter &lt;= 0;
      byteReady &lt;= 1;
   end
end
</code></pre>
<p>The final state is the stop bit state and like the read wait we are simply waiting 234 frames after which we are going back to the idle state and setting the <code>byteReady</code> flag bit to 1.</p>
<p>At this point we should have a working UART receiver, but we wont be able to see that anything is being received. So let's add another <code>always</code> block which will react to the data being ready and display the data (or 6 bits at least) on the leds.</p>

<pre class="language-v"><code class="language-v">always @(posedge clk) begin
    if (byteReady) begin
        led &lt;= ~dataIn[5:0];
    end
end
</code></pre>
<p>This block runs in parallel to the UART receiver and will update the LED's register on every clock pulse that the data is ready. We are inverting because the LEDs light up when a bit is set low.</p>
<h3 id="Testing-our-Module">Testing our Module</h3>
<p>Now before running this on the FPGA let's look at the first form of debugging which is simulation and visual logic debugging.</p>
<p>The way we do this is with Icarus Verilog or iVerilog and VCD files. We already set these up along with a plugin for visual studio code allowing us to view them. To get started we need to create another verilog module known as a test bench which will define the simulation. So create another verilog file called <code>uart_tb.v</code> with a new module:</p>

<pre class="language-v"><code class="language-v">module test();
  reg clk = 0;
  reg uart_rx = 1;
  wire uart_tx;
  wire [5:0] led;
  reg btn = 1;

  uart #(8'd8) u(
    clk,
    uart_rx,
    uart_tx,
    led,
    btn
  );
endmodule
</code></pre>
<p>This is a new module named test which simply doesn't receive any outside inputs and instead creates all the inputs that the module we want to test requires and creates an instance of that module. So here we are creating a register for the clock the uart rx and tx pins the wires and the button.</p>
<p>This isn't always true but as a general rule of thumb I use registers if it is an input into the module to drive the value and if it is an output I use a wire as the module itself will drive the value.</p>
<p>You can also see that we are defining an override for the <code>DELAY_FRAMES</code> parameter. The <code>#()</code> is for the parameters and we don't want to actually need to look at 234 frames of clock pulses in our simulation so I lowered it to 8 clock pulses.</p>
<p>Next we need a way to simulate the clock signal. This can be done like follows:</p>

<pre class="language-v"><code class="language-v">  always
    #1  clk = ~clk;
</code></pre>
<p>The <code>#number</code> (<code>#1</code>) is a special simulation syntax from iverilog that allows us to delay something by a certain number of time frames. By saying each time interval the clock alternates, we are saying the clock cycle is 2 time units (1 high cycle and 1 low cycle is 1 clock cycle). So this loop will wait 1 time unit and toggle the clock register.</p>
<p>The next simulation specific feature I want to go over is the <code>$display</code> and <code>$monitor</code> commands. They are similar to a <code>printf</code> or <code>console.log</code> where they print out a string optionally injecting variables into it. The difference between display and monitor, is that display will only print the value out once, monitor will print it out, and then reprint it out any time the value changes.</p>
<p>So to simulate the UART transmission we can do the following:</p>

<pre class="language-v"><code class="language-v">  initial begin
    $display(&quot;Starting UART RX&quot;);
    $monitor(&quot;LED Value %b&quot;, led);
    #10 uart_rx=0;
    #16 uart_rx=1;
    #16 uart_rx=0;
    #16 uart_rx=0;
    #16 uart_rx=0;
    #16 uart_rx=0;
    #16 uart_rx=1;
    #16 uart_rx=1;
    #16 uart_rx=0;
    #16 uart_rx=1;
    #1000 $finish;
  end
</code></pre>
<p>We start by printing a message, then we track the values of the leds and inject their value by using the <code>%b</code> which means print the binary representation of this field, we could have also used <code>%h</code> for hex representation <code>%d</code> for decimal and <code>%s</code> for string representation, among others.</p>
<p>After that we send the start bit by pulling the line low, then send 8 data bits and finally the stop bit. We delay by 16 time frames or 8 clock cycles as that is what we set <code>DELAY_FRAMES</code> to be.</p>
<p><code>$finish</code> stops the simulation, so after 1000 more time frames we stop the simulation.</p>
<p>For visually debugging the logic we can add another block to dump a VCD file.</p>

<pre class="language-v"><code class="language-v">  initial begin
    $dumpfile(&quot;uart.vcd&quot;);
    $dumpvars(0,test);
  end
</code></pre>
<p><code>$dumpfile</code> chooses the name of the file, and <code>$dumpvars</code> choosing what to save and how many levels of nested objects to save. By sending 0 as the number of layers it means we want all nested layers (which will include our uart module), and by sending the top module test it means store everything and all child wires / registers.</p>
<p>To run this now we need to run in a terminal from the project directory:</p>

<pre class="language-bash"><code class="language-bash">iverilog -o uart_test.o -s test uart.v uart_tb.v
vvp uart_test.o
</code></pre>
<p>The first one generates a simulation based on the verilog files we sent it, the <code>-s</code> sets what is the <code>top</code> or main module being run and <code>-o</code> sets the simulation executables name. Ones finished we can run the simulation with the second line and it will produce the following output:</p>

<pre class="language-bash"><code class="language-bash">Starting UART RX
VCD info: dumpfile uart.vcd opened for output.
LED Value xxxxxx
LED Value 011110
</code></pre>
<p>We can see it creating the VCD file as well as printed our message and the state of the led register. The initial value is <code>xxxxxx</code> because we did not initialize it, and <code>x</code> represents an unknown value. Once the full byte has been read in, the register gets updated with the inverted value of the first 6 bits.</p>
<p>Simulation-wise our program looks good, now let's take a look at the VCD file. Opening it in Visual Studio Code once you have the plugin installed will open up a UI that looks something like the following:</p>
<p><img src="./assets/uart_vcd.jpg" alt="uart_vcd" /></p>
<p>By clicking on &quot;Add Signals&quot; you can add any of the wires or registers to the UI. In-our example let's add the clock, uart_rx wire, rx state and Â led value. Once added you should have something like the following:</p>
<p><img src="./assets/debug_rx.jpg" alt="debug_rx" /></p>
<p>If we zoom in on the start bit and first data bit:</p>
<p><img src="./assets/debug_rx_start.jpeg" alt="debug_rx_start" /></p>
<p>We can see the state starts in idle, One clock cycle after we go to the start bit state where we wait the remainder of the first half cycle. Since we defined each uart bit to take 8 clock cycles we wait here for 4 clock cycles and move to the read-wait stage. There we wait the full 8 clock cycles and move to read a bit, going back to the read-wait stage one clock cycle later.</p>
<p>From the simulation it looks like our module is working. But if we had an issue, for example we forgot to clear the counter in the read state. We would see that after the first bit was read we would never leave read wait stage.</p>
<p><img src="./assets/stuck_in_read_wait.jpg" alt="stuck_in_read_wait" /></p>
<p>Or if we made the counter too small for example:</p>

<pre class="language-v"><code class="language-v">reg [1:0] rxCounter;
</code></pre>
<p>which can only store up to the number 3, if we needed it to count to 8 it wouldn't be able to:</p>
<p><img src="./assets/register_too_small.jpg" alt="register_too_small" /></p>
<p>In both of these cases taking a look at the <code>rxCounter</code> we would see something going on, like here we can see that the register rolls over back to 0 after 3 since there are no more bits and as a result we get back stuck in the start bit state.</p>
<p>This is also why you should also test your module with the real values. We changed DELAY_FRAMES to 8 to make it easier to follow step by step. But to make sure we don't have this problem with register sizes we would need to also test with the correct settings.</p>
<p>Now to run it on the Tang Nano 9K, lets create a makefile to make it easier:</p>

<pre class="language-makefile"><code class="language-makefile">BOARD=tangnano9k
FAMILY=GW1N-9C
DEVICE=GW1NR-LV9QN88PC6/I5

all: uart.fs

# Synthesis
uart.json: uart.v
    yosys -p &quot;read_verilog uart.v; synth_gowin -top uart -json uart.json&quot;

# Place and Route
uart_pnr.json: uart.json
    nextpnr-gowin --json uart.json --freq 27 --write uart_pnr.json --device ${DEVICE} --family ${FAMILY} --cst ${BOARD}.cst

# Generate Bitstream
uart.fs: uart_pnr.json
    gowin_pack -d ${FAMILY} -o uart.fs uart_pnr.json

# Program Board
load: uart.fs
    openFPGALoader -b ${BOARD} uart.fs -f

uart_test.o: uart.v uart_tb.v
    iverilog -o uart_test.o -s test uart.v uart_tb.v

test: uart_test.o
    vvp uart_test.o

# Cleanup build artifacts
clean:
    rm uart.vcd uart.fs uart_test.o

.PHONY: load clean test
.INTERMEDIATE: uart_pnr.json uart.json uart_test.o
</code></pre>
<p>This is very similar to the previous makefile we made, just with the added target to test using <code>iverilog</code> and also a target called <code>clean</code> which will delete some of the artifacts.</p>
<p>So you can run <code>make load</code> to program the Tang Nano and then we should be able to view the data being sent to it over the LEDs. To open a serial terminal we can use tabby.</p>
<p>Under the settings, if you go to &quot;Profiles &amp; Connections&quot; under the advanced tab and select &quot;Serial&quot;, we can define the settings for our device:</p>
<p><img src="./assets/navigation.jpg" alt="navigation" /></p>
<p>We need to select the serial device since the Tang Nano has two, 1 for JTAG and 1 for UART (which is usually the serial device with the higher number).</p>
<p>Inside we need to also set the baud rate which we said is 115200</p>
<p><img src="./assets/serial_settings.jpg" alt="serial_settings" /></p>
<p>I also turned on Local echo so it will also print what we type, under the &quot;Advanced&quot; tab here we can see that there is 1 stop bit and 8 data bits.</p>
<p>You can save this configuration and then under the profiles tab you can run the profile for the serial device chosen. You should see that you are connected and by pressing keys on the keyboard you should see the LEDs update.</p>
<h2 id="Transmitting-Data">Transmitting Data</h2>
<p>Sending data is even more powerful in debugging since we can send things happening at runtime to a serial terminal to gain visibility. For example in our case, you can send back what you think you received over UART, if we saw bits being repeated, or bits missing we could know that the baud rate is too slow or too fast accordingly. Also very handy for dumping memory or sensor values when interfacing with other devices.</p>
<p>The transmit side is very similar to the implementation of the receiver we did above, except that we don't want to count from the middle of the pulse, the transmit side has to change the line at the beginning of each bit frame.</p>
<p>Let's start by adding some registers for the transmit side:</p>

<pre class="language-v"><code class="language-v">reg [3:0] txState = 0;
reg [24:0] txCounter = 0;
reg [7:0] dataOut = 0;
reg txPinRegister = 1;
reg [2:0] txBitNumber = 0;
reg [3:0] txByteCounter = 0;

assign uart_tx = txPinRegister;

localparam MEMORY_LENGTH = 12;
reg [7:0] testMemory [MEMORY_LENGTH-1:0];
</code></pre>
<p>Like on the receiver side, we have a register to keep track of the tx state machine, we have a register for counting clock cycles. <code>dataOut</code> stores the byte being sent currently and <code>txPinRegister</code> is just a register to store the current value that should be attached to the <code>uart_tx</code> pin. The last two registers keep track of which bit we are currently sending, and the next is for which byte.</p>
<p>In our example we will be sending a message from memory, so we need to keep track of the current byte. The <code>assign</code> statement connects the <code>uart_tx</code> wire to the register we created and the last two lines define a new &quot;memory&quot; where each cell is 8 bits long, and in our example we have 12 total cells.</p>

<pre class="language-v"><code class="language-v">initial begin
    testMemory[0] = &quot;L&quot;;
    testMemory[1] = &quot;u&quot;;
    testMemory[2] = &quot;s&quot;;
    testMemory[3] = &quot;h&quot;;
    testMemory[4] = &quot;a&quot;;
    testMemory[5] = &quot;y&quot;;
    testMemory[6] = &quot; &quot;;
    testMemory[7] = &quot;L&quot;;
    testMemory[8] = &quot;a&quot;;
    testMemory[9] = &quot;b&quot;;
    testMemory[10] = &quot;s&quot;;
    testMemory[10] = &quot; &quot;;
end
</code></pre>
<p>This next code initializes the memory. There are also verilog commands that load in memory from a file, so when working on bigger memory blocks instead of initializing one byte at a time we could read it all from a binary or hex file, we will explore this more in a future article.</p>
<p>Next let's define the states of our state machine. We don't have an extra &quot;wait&quot; stage here, again because we are not offsetting to the middle of the frame like when reading. We do have an extra stage at the end to debounce the button, since we will be using the button to determine when to send data.</p>

<pre class="language-v"><code class="language-v">localparam TX_STATE_IDLE = 0;
localparam TX_STATE_START_BIT = 1;
localparam TX_STATE_WRITE = 2;
localparam TX_STATE_STOP_BIT = 3;
localparam TX_STATE_DEBOUNCE = 4;
</code></pre>
<h3 id="The-Transmit-States">The Transmit States</h3>

<pre class="language-v"><code class="language-v">TX_STATE_IDLE: begin
    if (btn1 == 0) begin
        txState &lt;= TX_STATE_START_BIT;
        txCounter &lt;= 0;
        txByteCounter &lt;= 0;
    end
    else begin
        txPinRegister &lt;= 1;
    end
end 
</code></pre>
<p>The idle state waits for the button to be pressed (which will make it go low) at which point we will move to the start bit state. If the button is not pressed we set the <code>uart_tx</code> to be high as in UART we have a high idle state.</p>

<pre class="language-v"><code class="language-v">TX_STATE_IDLE: begin
    if (btn1 == 0) begin
        txState &lt;= TX_STATE_START_BIT;
        txCounter &lt;= 0;
        txByteCounter &lt;= 0;
    end
    else begin
        txPinRegister &lt;= 1;
    end
end 
</code></pre>
<p>The start bit is a low signal for <code>DELAY_FRAMES</code>, once reached we put the next byte we need to send into <code>dataOut</code> and reset the <code>txBitNumber</code> back to 0.</p>

<pre class="language-v"><code class="language-v">TX_STATE_WRITE: begin
    txPinRegister &lt;= dataOut[txBitNumber];
    if ((txCounter + 1) == DELAY_FRAMES) begin
        if (txBitNumber == 3'b111) begin
            txState &lt;= TX_STATE_STOP_BIT;
        end else begin
            txState &lt;= TX_STATE_WRITE;
            txBitNumber &lt;= txBitNumber + 1;
        end
        txCounter &lt;= 0;
    end else 
        txCounter &lt;= txCounter + 1;
end
</code></pre>
<p>The write state is very similar, except instead of setting the tx pin to low, we set it to the current bit of the current byte. When the frame is over we check if we are already on the last bit, if so we go to the stop bit state, otherwise we increment the bit number and keep the current state of <code>TX_STATE_WRITE</code>.</p>

<pre class="language-v"><code class="language-v">TX_STATE_STOP_BIT: begin
    txPinRegister &lt;= 1;
    if ((txCounter + 1) == DELAY_FRAMES) begin
        if (txByteCounter == MEMORY_LENGTH - 1) begin
            txState &lt;= TX_STATE_DEBOUNCE;
        end else begin
            txByteCounter &lt;= txByteCounter + 1;
            txState &lt;= TX_STATE_START_BIT;
        end
        txCounter &lt;= 0;
    end else 
        txCounter &lt;= txCounter + 1;
end
</code></pre>
<p>The stop bit is a high output bit, after waiting <code>DELAY_FRAMES</code> we check if there are any other bytes to send, if there are, we go back to send another start bit and the cycle will repeat for the next byte. If not we go to the debounce state.</p>

<pre class="language-v"><code class="language-v">TX_STATE_DEBOUNCE: begin
    if (txCounter == 23'b111111111111111111) begin
        if (btn1 == 1) 
            txState &lt;= TX_STATE_IDLE;
    end else
        txCounter &lt;= txCounter + 1;
end
</code></pre>
<p>Here we are just waiting a minimum time (about 10 ms) on top of the sending time, and making sure the button is released after this time. This is to ensure that for each button press we only get one transmission event.</p>
<p>Press on &quot;FPGA Toolchain&quot; &gt; &quot;Build and Program&quot; or Run <code>make load</code> to reprogram the Tang Nano 9K and reopen the serial terminal. You should see that every time you press the button the FPGA should send the message we stored in memory over UART.</p>
<img src="./assets/uart_transmit.jpg" alt="uart_transmit">
<p>For sending data that isn't ascii, you have a few options, the first being you can setup in tabby to print the data out in hex, and then manually decode it, or you can convert the data on device. So for example you can have another module which takes a number and converts it into text by encoding each digit into ascii. As to not make this article too long, we will cover these conversion methods in another article.</p>
<h2 id="Interacting-Programmatically">Interacting Programmatically</h2>
<p>Serial terminal is great for quickly debugging or viewing data, but sometimes you need some processing on the data on the computer side, or you may just want to use the UART to communicate / control an application on one of the sides. To do this we need to open the serial port programmatically. We will be looking at a simple javascript example using node.js and the serialport library.</p>
<p>To install the library run the following from a terminal in your project directory:</p>

<pre class="language-bash"><code class="language-bash">npm i serialport
</code></pre>
<p>This will install the library we can then create a test script to print out the serial devices it sees, so create a file for example called <code>list-devices.js</code>:</p>

<pre class="language-javascript"><code class="language-javascript">const {SerialPort} = require('serialport');

SerialPort.list().then(console.log);
</code></pre>
<p>and then you can run it with <code>node list-devices.js</code> you should see something like the following:</p>
<p><img src="./assets/uart_devices.jpg" alt="uart_devices" /></p>
<p>With the <code>path</code> for the device we can write a simple program to interact with the tang nano:</p>

<pre class="language-javascript"><code class="language-javascript">const {SerialPort} = require('serialport');

const tangnano = new SerialPort({
    path: '/dev/tty.usbserial-2101',
    baudRate: 115200,
});

let counter = 0;

tangnano.on('data', function (data) {
    console.log('Data In Text:', data.toString());
    console.log('Data In Hex:', data.toString('hex'));

    const binary = data.toString().split('').map((byte) =&gt; {
        return byte.charCodeAt(0).toString(2).padStart(8, '0');
    });
    console.log('Data In Binary: ', binary.join(' '));
    console.log(&quot;\n&quot;);
    counter += 1;
    tangnano.write(Buffer.from([counter]));
});
</code></pre>
<p>We start by importing the library, then we initialize our device by sending the correct path and baud rate.</p>
<p>Next we initialize a counter variable which we will use to count the number of transmissions.</p>
<p>The next block will run every time there is a new message from the tang nano over the serial port. In this example we will simply print out the data in multiple formats as an example, and the final two lines increment the counter and send it to the tang nano.</p>
<p><img src="./assets/uart_program.jpg" alt="uart_program" /></p>
<p>Running the script with you should something like the above, also see every time you press the button the LEDs count up in binary since they are connected to the byte being sent over UART and we are sending the counter. To exit the application you can press <code>ctrl-c</code> which will stop the process to regain control over the terminal.</p>
<h2 id="Conclusion">Conclusion</h2>
<p>In this article we created our own UART module and went over some common issues and debugging methods. In the next article we will take a look at using a screen as another method of displaying data or relaying information from the FPGA.</p>
<p>For those that made it this far I would like to thank you, and I hope you enjoyed reading. As always the code is available <a href="https://github.com/lushaylabs/tangnano9k-series-examples">here(github)</a>. And if you have any questions or comments feel free to leave them below or contact me on twitter <a href="https://twitter.com/LushayLabs">@LushayLabs</a>.</p>

                        
                    </div>
                </div>
                <div id="previous_next">
                    <div id="previous">
                        
                    </div>
                    <div id="next">
                        
                    </div>
                </div>
                <div id="comments-container"></div>
            </div>
            <div id="toc_wrapper">
                <div id="toc">
                    <div id="toc_content">
                            
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a id="to_top" href="#"></a>
    <div id="doc_footer">
        <div id="footer">
            <div id="footer_top">
                <ul>
<li><a>ç›¸å…³é“¾æ¥</a><ul><li><a target="_blank" href="https://www.sipeed.com">Sipeed å®˜ç½‘</a></li>
<li><a target="_blank" href="https://maixhub.com/">MaixHub</a></li>
<li><a target="_blank" href="https://bbs.sipeed.com/">BBS è®ºå›</a></li>
<li><a target="_blank" href="https://sipeed.taobao.com/">Sipeed æ·˜å®</a></li>
<li><a target="_blank" href="https://github.com/neutree/teedoc">ç½‘ç«™ä½¿ç”¨ teedoc ç”Ÿæˆ</a></li>
</ul>
</li>
<li><a>ç½‘ç«™ç»Ÿè®¡</a><ul><li><a target="_blank" href="https://tongji.baidu.com/web/welcome/ico?s=9cb07365544a53067c56c346c838181a">ç™¾åº¦ç»Ÿè®¡</a></li>
<li><a  href="/sitemap.xml">ç½‘ç«™åœ°å›¾</a></li>
</ul>
</li>
<li><a>æºç </a><ul><li><a target="_blank" href="https://github.com/sipeed/sipeed_wiki">ç½‘ç«™æºç </a></li>
<li><a target="_blank" href="https://github.com/sipeed">å¼€æºé¡¹ç›®æºç </a></li>
</ul>
</li>
<li><a>å…³æ³¨æˆ‘ä»¬</a><ul><li><a target="_blank" href="https://github.com/sipeed">github</a></li>
<li><a target="_blank" href="https://twitter.com/SipeedIO">twitter</a></li>
<li><a target="_blank" href="https://sipeed.taobao.com/">æ·˜å®</a></li>
<li><a  href="/community.html">æ›´å¤š</a></li>
</ul>
</li>
<li><a>è”ç³»æˆ‘ä»¬</a><ul><li><a>ç”µè¯: +86 0755-27808509</a>
</li>
<li><a>å•†ä¸šæ”¯æŒ: support@sipeed.com</a>
</li>
<li><a>åœ°å€: æ·±åœ³å¸‚å®å®‰åŒºæ–°æ¹–è·¯4008å·è˜…èŠ³ç§‘æŠ€åŠå…¬å¤§å¦Aåº§-2101C</a>
</li>
<li><a  href="/join_us.html">åŠ å…¥æˆ‘ä»¬</a></li>
</ul>
</li>
</ul>

            </div>
            <div id="footer_bottom">
                <ul>
<li><a target="_blank" href="https://www.sipeed.com">Â©2018-2023 æ·±åœ³çŸ½é€Ÿç§‘æŠ€æœ‰é™å…¬å¸</a></li>
<li><a target="_blank" href="https://beian.miit.gov.cn/#/Integrated/index">ç²¤ICPå¤‡19015433å·</a></li>
</ul>

            </div>
        </div>
    </div>
    
        <script src="/teedoc-plugin-markdown-parser/mermaid.min.js"></script>
    
        <script>mermaid.initialize({startOnLoad:true});</script>
    
        <script type="text/javascript">
                var transLoaded = false;
                var loading = false;
                var domain = "/";
                var domainDefault = domain;
                var storeDomain = localStorage.getItem("googleTransDomain");
                if(storeDomain){
                    domain = storeDomain;
                }
                function getUrl(domain){
                    if(domain == "/")
                        return "/static/js/google_translate/element.js?cb=googleTranslateElementInit";
                    else
                        return "https://" + domain + "/translate_a/element.js?cb=googleTranslateElementInit";
                }
                var url = getUrl(domain);
                function googleTranslateElementInit() {
                    new google.translate.TranslateElement({pageLanguage: "auto", layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
                }
                function loadJS( url, callback ){
                    var script = document.createElement('script');
                    fn = callback || function(){ };
                    script.type = 'text/javascript';
                    if(script.readyState){
                        script.onreadystatechange = function(){
                            if( script.readyState == 'loaded' || script.readyState == 'complete' ){
                                script.onreadystatechange = null;
                                fn();
                            }
                        };
                    }else{
                        script.onload = function(){
                            fn();
                        };
                    }
                    script.src = url;
                    document.getElementsByTagName('head')[0].appendChild(script);
                }
                function removeHint(){
                    var hint = document.getElementById("loadingTranslate");
                    if(hint){
                        hint.remove();
                    }
                }
                var btn = document.getElementById("google_translate_element");
                btn.onclick = function(){
                    if(transLoaded) return;
                    if(loading){
                        var flag = confirm("loading from " + domain + ", please wait, or change domain?");
                        if(flag){
                            newDomain = prompt("domain, default: " + domainDefault + ", now: " + domain);
                            if(newDomain){
                                domain = newDomain;
                                console.log(domain);
                                url = getUrl(domain);
                                loadJS(url, function(){
                                    localStorage.setItem("googleTransDomain", domain);
                                    removeHint()
                                    transLoaded = true;
                                });
                            }
                        }
                        return;
                    }
                    btn.innerHTML = '<span id="loadingTranslate"><img class="icon" src="/static/image/google_translate/translate.svg"/>Loading ...</span>';
                    loading = true;
                    loadJS(url, function(){
                        localStorage.setItem("googleTransDomain", domain);
                        removeHint()
                        transLoaded = true;
                    });
                }
                </script>
            
    
        <script src="/static/js/plugin_blog/main.js"></script>
    
        <script src="/static/js/theme_default/tocbot.min.js"></script>
    
        <script src="/static/js/theme_default/main.js"></script>
    
        <script src="/static/js/theme_default/viewer.min.js"></script>
    
        <script src="/static/js/prism.js"></script>
    
        <script src="/static/js/search/search_main.js"></script>
    
        <script src="/static/js/gitalk/gitalk.min.js"></script>
    
        <script src="/static/js/gitalk/main.js"></script>
    
        <link rel="stylesheet" href="/static/js/add_hint/style.css" type="text/css"/>
    
        <script src="/static/js/add_hint/main.js"></script>
    
        <script src="/static/js/custom.js"></script>
    
        <script src="/static/js/thumbs_up/main.js"></script>
    
</body>

</html>