<!DOCTYPE html>

<html lang="en"  class="">


<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="keywords" content="">
    
    
    <meta name="description" content="">
    
    <meta name="generator" content="teedoc">
    <meta name="theme" content="teedoc-plugin-theme-default">
    
        
        <meta name="markdown-generator" content="teedoc-plugin-markdown-parser">
        
        <script>
MathJax = {"loader": {"load": ["output/svg"]}, "tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]]}, "svg": {"fontCache": "global"}};
</script>
        
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
        <meta name="html-generator" content="teedoc-plugin-jupyter-notebook-parser">
        
        <meta name="blog-generator" content="teedoc-plugin-blog">
        
        <script src="/static/js/theme_default/pre_main.js"></script>
        
        <link rel="stylesheet" href="/static/css/theme_default/viewer.min.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/prism.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/dark.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/theme_default/light.css" type="text/css"/>
        
        <script src="/static/js/theme_default/jquery.min.js"></script>
        
        <script src="/static/js/theme_default/split.js"></script>
        
        <link rel="stylesheet" href="/static/css/search/style.css" type="text/css"/>
        
        <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?9cb07365544a53067c56c346c838181a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
        
            <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119047820-5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
  
      gtag('config', 'UA-119047820-5');
    </script>
        
        <link rel="stylesheet" href="/static/css/gitalk/gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/gitalk/custom_gitalk.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/css/custom.css" type="text/css"/>
        
        <link rel="stylesheet" href="/static/js/thumbs_up/style.css" type="text/css"/>
        
    
    
    <title>FOMO Lightweight Detection Model - Sipeed Wiki</title>
    
    <script type="text/javascript">js_vars = {"teedoc-plugin-ad-hint": {"bg_color": "#ffcf89", "bg_color_hover": "#f57c00", "close_color": "#eab971", "color": "#a0421d", "color_hover": "white", "content": "New MaixHub online, online annotation, one-key to deploy, better experience, support Maix-I, Maix-II, mobile phone, web, \u003ca href=\u0027https://maixhub.com\u0027\u003eGo!\u003c/a\u003e\u003c/br\u003eLatest open source project \u003ca href=\u0027https://github.com/sipeed/TinyMaix\u0027\u003eTinyMaix\u003c/a\u003e, model infer runtime runs on any MCU, even runs on 2KiB RAM chip", "date": "2022-06-01 14:00", "label": "\u2606", "link_bg_color": "#e6ae5c", "link_color": "#e53935", "show_after_s": 432000, "show_times": 2, "type": "hint"}, "teedoc-plugin-thumbs-up": {"icon": "/static/images/thumbs_up/up.svg", "icon_clicked": "/static/images/thumbs_up/upped.svg", "label_down": "Not Helpful", "label_up": "Helpful", "msg_already_voted": "You have already voted", "msg_down_prompt": "Thanks to tell us where we can improve?(At least 10 characters)", "msg_down_prompt_error": "Message should be at least 10 characters and less than 256 characters", "msg_error": "Request server failed!", "msg_thanks": "Thanks for your vote", "show_down_count": false, "show_up_count": true, "url": "https://thumbs-up.sipeed.com"}}</script>
</head>


<body class="type_doc">
    
    <div id="navbar">
        <div id="navbar_menu">
            <a class="site_title" href="/en/">
                
                    <img class="site_logo" src="/static/image/logo.svg" alt="sipeed wiki logo">
                
                
                    <h2>wiki</h2>
                
        </a>
            <a id="navbar_menu_btn"></a>
        </div>
        <div id="navbar_items">
            <div>
                <ul id="nav_left">
<li class="sub_items "><a href="/hardware/en/index.html">Products</a><ul><li class=""><a  href="/hardware/en/maix/index.html">Maix-I</a></li>
<li class=""><a  href="/hardware/en/maixII/index.html">Maix-II</a></li>
<li class=""><a  href="/hardware/en/lichee/index.html">LicheePi</a></li>
<li class=""><a  href="/hardware/en/tang/index.html">Tang</a></li>
<li class=""><a  href="/hardware/en/longan/Nano/Longan_nano.html">Longan</a></li>
<li class=""><a  href="/hardware/en/maixsense/index.html">MaixSense</a></li>
<li class=""><a  href="/hardware/en/modules_spmod/spmod_extender.html">SP-Mod</a></li>
</ul>
</li>
<li class="sub_items active_parent"><a >Software Docs</a><ul><li class=""><a  href="/soft/maixpy/en/index.html">MaixPy</a></li>
<li class=""><a  href="/soft/maixpy3/zh/index.html">MaixPy3</a></li>
<li class=""><a  href="/soft/Lichee/zh/index.html">Lichee</a></li>
<li class="active"><a  href="/ai/en/index.html">AI Guide</a></li>
</ul>
</li>
<li class="sub_items "><a >Online Service</a><ul><li class=""><a target="_blank" href="https://maixhub.com">MaixHub: AI online training and sharing platform</a></li>
<li class=""><a target="_blank" href="https://dl.sipeed.com/">Download center</a></li>
<li class=""><a  href="/en/community.html">community</a></li>
</ul>
</li>
<li class=""><a  href="/news/">Articles</a></li>
<li class=""><a  href="/en/store.html">Online Store</a></li>
</ul>

            </div>
            <div>
                <ul id="nav_right">
<li class=""><a  href="/share_docs/en/">Contribute docs</a></li>
<li class=""><a target="_blank" href="https://github.com/sipeed">Github </a></li>
<li class="sub_items "><a  href="">Language: English</a><ul><li class="active"><a  href="/ai/en/">English</a></li>
<li class=""><a  href="/ai/zh/">中文 简体</a></li>
</ul></li>
</ul>

                <ul class="nav_plugins"><li><a id="google_translate_element"><img class="icon" src="/static/image/google_translate/translate.svg"/>Translate</a></li></ul><ul class="nav_plugins"><li><a id="themes" class="light"></a></li></ul><ul class="nav_plugins"><li><a id="search"><span class="icon"></span><span class="placeholder">Search</span>
                            <div id="search_hints">
                                <span id="search_input_hint">Input keyword. Using Space to separate multiple keywords</span>
                                <span id="search_loading_hint">Loading, please wait</span>
                                <span id="search_download_err_hint">Fail download, Please retry or check network</span>
                                <span id="search_other_docs_result_hint">Results form other doc</span>
                                <span id="search_curr_doc_result_hint">Result form current doc</span>
                            </div></a></li></ul>
            </div>
        </div>
    </div>
    
    <div id="wrapper">
        <div id="sidebar_wrapper">
            <div id="sidebar">
                <div id="sidebar_title">
                    
                </div>
                <ul class="show">
<li class="not_active with_link"><a href="/ai/en/index.html"><span class="label">Doc brief</span><span class=""></span></a></li>
<li class="not_active no_link sidebar_category"><span class="label">AI basic</span></li>
<li class="not_active with_link"><a href="/ai/en/basic/what_is_ai.html"><span class="label">What is AI ?</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/ai/en/basic/dnn_basic.html"><span class="label">Simple Understanding DNN</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/ai/en/basic/code_frameworks.html"><span class="label">Code Frameworks and Tools</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/ai/en/basic/courses.html"><span class="label">Tutorial summary</span><span class=""></span></a></li>
<li class="active_parent no_link"><a><span class="label">Common NN Models</span><span class="sub_indicator"></span></a><ul class="show">
<li class="not_active with_link"><a href="/ai/en/nn_models/mobilenet.html"><span class="label">Mobilenet Classification</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/ai/en/nn_models/yolov2.html"><span class="label">YOLO v2 Detection</span><span class=""></span></a></li>
<li class="active with_link"><a href="/ai/en/nn_models/fomo.html"><span class="label">FOMO Lightweight Detection</span><span class=""></span></a></li>
</ul>
</li>
<li class="not_active no_link sidebar_category"><span class="label">Deploy to edge devices</span></li>
<li class="not_active with_link"><a href="/ai/en/deploy/index.html"><span class="label">Deployment methods</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/ai/en/deploy/k210.html"><span class="label">Deploy to Maix-I K210</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/ai/en/deploy/v831.html"><span class="label">Deploy to Maix-II V831</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/ai/en/deploy/tinymaix.html"><span class="label">TinyMaix deployment</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/ai/en/deploy/ax-pi.html"><span class="label">AX-Pi deployment</span><span class=""></span></a></li>
<li class="not_active no_link sidebar_category"><span class="label">MaixHub</span></li>
<li class="not_active with_link"><a href="/ai/en/maixhub/index.html"><span class="label">MaixHub brief</span><span class=""></span></a></li>
<li class="not_active with_link"><a href="/ai/en/maixhub/train_best.html"><span class="label">MaixHub online train optimization</span><span class=""></span></a></li>
</ul>

            </div>
        </div>
        <div id="article">
            <div id="menu_wrapper">
                <div id="menu">
                </div>
            </div>
            <div id="content_wrapper">
                <div id="content_body">
                    <div id="article_head">
                        <div id="article_title">
                            
                            <h1>FOMO Lightweight Detection Model</h1>
                            
                        </div>
                        <div id="article_tags">
                            <ul>
                            
                            </ul>
                        </div>
                        <div id="article_info">
                        <div id="article_info_left">
                            <span class="article_author">
                                
                            </span>
                            
                        </div>
                        <div id="article_info_right">
                            
                            <div id="source_link">
                                <a href="https://github.com/sipeed/sipeed_wiki/blob/main/docs/soft/ai/en/nn_models/fomo.md" target="_blank">
                                    Edit this page
                                </a>
                            </div>
                            
                        </div>
                        </div>
                    </div>
                    <div id="article_tools">
                        <span></span>
                        <span id="toc_btn"></span>
                    </div>
                    <div id="update_history">
                        
                    </div>
                    <div id="article_content">
                        
                            <p>FOMO (Faster Objects, More Objects) is a lightweight target detection model proposed by Edgeimpulse engineers. Its main feature is that the model is very small and the amount of calculation is small. It is very fast and accurate.</p>
<p>The advantage of FOMO is fast speed, and the disadvantage is that the accuracy is not high, but in some scenarios that do not require high accuracy, FOMO is a good choice.</p>
<h2 id="Target">Target</h2>
<p>Input a picture, detect the position and size of the target, and recognize the category of the object, and can detect multiple objects at the same time.</p>
<h2 id="principle">principle</h2>
<p>Original doc: <a href="https://docs.edgeimpulse.com/docs/edge-impulse-studio/learning-blocks/object-detection/fomo-object-detection-for-constrained-devices"  target="_blank">FOMO: Object detection for constrained devices</a></p>
<p>Similar to YOLO v2, the purpose is to detect objects, but the post-processing of YOLO v2 is still relatively complicated, there are a large number of bounding boxes to be processed, and it is still very difficult to run on a microcontroller without hardware acceleration.<br />
FOMO uses a simpler idea to detect:</p>
<ul>
<li>Use a classic network as a feature extractor, such as MobileNet v1, and then truncate from the middle of the network to get a feature map. The size of this feature map is n x n x c, n is the width and height of the feature map, and c is the number of channels of the feature map.</li>
</ul>
<p>The value of n here depends on where to truncate from the network. For example, our input resolution is 128 x 128, and we want an 8 x 8 feature map output, which is equivalent to reducing the image resolution by 16 times. Find this layer truncation from the network Get an 8 x 8 feature map.</p>
<ul>
<li>This n x n x c, c represents that there are c categories, each layer is used to find the position of a classified object, each layer has n x n pixels, and each pixel represents whether there is an object of this category at that position (Confidence )</li>
<li>Traverse this n x n x c feature map, find the pixel coordinates whose confidence exceeds the set threshold, we think that there are objects in these places, and then map to the original image according to the scaling ratio, for example, when there is only one category, that is, c is 1, we need to detect One cup, the following results are obtained:</li>
</ul>
<p><img src="../../assets/fomo1.jpg" alt="" /></p>
<ul>
<li>After getting a lot of coordinate points that look valid, we think that there are objects in these places, but there are a lot of points, we can simply merge the points next to each other into a box, so that we get a big box</li>
</ul>
<p><img src="../../assets/fomo_result.jpg" alt="" /></p>
<ul>
<li>Because this box may not be very accurate sometimes, the official Edgeimpulse method is to use the center point of this box, so that the probability of this point on the object is relatively high. In the implementation of MaixHub, the box is directly given for you to choose Use the box directly, or if you want to use only the center point, you can modify the code yourself.</li>
</ul>
<p>In fact, the above processing has been encapsulated in the <a href="https://github.com/sipeed/TinyMaix/tree/main/examples/maixhub_detection_fomo"  target="_blank">code</a> library. In actual use, you only need to train the model and combine the code to run.</p>
<h2 id="Try-to-train-a-model">Try to train a model</h2>
<p>Create a detection training project in <a href="https://maixhub.com"  target="_blank">MaixHub</a>, then collect data and label (can be marked online), create a training task, select the TinyMaix platform as the parameter, select fomo, and select the backbone network according to the actual situation. For example, the name <code>mobilenetv1_0.25_8</code> means that the <code>mobilenetv1</code> network is used, and the alpha is 0.25. The smaller the value, the smaller the network and the lower the accuracy rate. The last 8 means that the output resolution is 1 of the input resolution. /8, for example, if the input is 128x128, the output is 16x16. The larger the output resolution, the more suitable for detecting smaller objects. Choose according to your MCU performance and the size of the object to be detected.<br />
Then just do the training. After the training is completed, the model is obtained. According to the instructions in <a href="https://github.com/sipeed/TinyMaix/tree/main/examples/maixhub_detection_fomo"  target="_blank">code</a>, put the model file into the code. Then compile and run. You can test it under Linux now, and then transfer it to the single-chip microcomputer to run.</p>

                        
                    </div>
                </div>
                <div id="previous_next">
                    <div id="previous">
                        
                        <a href="/ai/en/nn_models/yolov2.html">
                            <span class="icon"></span>
                            <span class="label">YOLO v2 Detection</span>
                        </a>
                        
                    </div>
                    <div id="next">
                        
                        <a href="/ai/en/deploy/index.html">
                            <span class="label">Deployment methods</span>
                            <span class="icon"></span>
                        </a>
                        
                    </div>
                </div>
                <div id="comments-container"></div>
            </div>
            <div id="toc_wrapper">
                <div id="toc">
                    <div id="toc_content">
                            
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a id="to_top" href="#"></a>
    <div id="doc_footer">
        <div id="footer">
            <div id="footer_top">
                <ul>
<li><a>Other links</a><ul><li><a target="_blank" href="https://www.sipeed.com">Sipeed</a></li>
<li><a target="_blank" href="https://maixhub.com/">MaixHub</a></li>
<li><a target="_blank" href="https://bbs.sipeed.com/">BBS </a></li>
<li><a target="_blank" href="https://sipeed.aliexpress.com/store/911876460">Sipeed AliExpress</a></li>
<li><a target="_blank" href="https://github.com/neutree/teedoc">Build by teedoc </a></li>
</ul>
</li>
<li><a>Source Code</a><ul><li><a target="_blank" href="https://github.com/sipeed/sipeed_wiki">Website source code</a></li>
<li><a target="_blank" href="https://github.com/sipeed">Open Souecr Code</a></li>
</ul>
</li>
<li><a>Follow us</a><ul><li><a target="_blank" href="https://github.com/sipeed">github</a></li>
<li><a target="_blank" href="https://twitter.com/SipeedIO">twitter</a></li>
<li><a target="_blank" href="https://sipeed.aliexpress.com/store/911876460">AliExpress</a></li>
<li><a  href="/community.html">more</a></li>
</ul>
</li>
<li><a>Contact us</a><ul><li><a>Tel: +86 0755-27808509</a>
</li>
<li><a>Business mail: support@sipeed.com</a>
</li>
<li><a>Adress: 深圳市宝安区新湖路4008号蘅芳科技办公大厦A座-2101C</a>
</li>
<li><a  href="/join_us.html">Join us</a></li>
</ul>
</li>
</ul>

            </div>
            <div id="footer_bottom">
                <ul>
<li><a target="_blank" href="https://www.sipeed.com">©2018-2023 深圳矽速科技有限公司</a></li>
<li><a target="_blank" href="https://beian.miit.gov.cn/#/Integrated/index">粤ICP备19015433号</a></li>
</ul>

            </div>
        </div>
    </div>
    
        <script src="/teedoc-plugin-markdown-parser/mermaid.min.js"></script>
    
        <script>mermaid.initialize({startOnLoad:true});</script>
    
        <script type="text/javascript">
                var transLoaded = false;
                var loading = false;
                var domain = "/";
                var domainDefault = domain;
                var storeDomain = localStorage.getItem("googleTransDomain");
                if(storeDomain){
                    domain = storeDomain;
                }
                function getUrl(domain){
                    if(domain == "/")
                        return "/static/js/google_translate/element.js?cb=googleTranslateElementInit";
                    else
                        return "https://" + domain + "/translate_a/element.js?cb=googleTranslateElementInit";
                }
                var url = getUrl(domain);
                function googleTranslateElementInit() {
                    new google.translate.TranslateElement({pageLanguage: "auto", layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
                }
                function loadJS( url, callback ){
                    var script = document.createElement('script');
                    fn = callback || function(){ };
                    script.type = 'text/javascript';
                    if(script.readyState){
                        script.onreadystatechange = function(){
                            if( script.readyState == 'loaded' || script.readyState == 'complete' ){
                                script.onreadystatechange = null;
                                fn();
                            }
                        };
                    }else{
                        script.onload = function(){
                            fn();
                        };
                    }
                    script.src = url;
                    document.getElementsByTagName('head')[0].appendChild(script);
                }
                function removeHint(){
                    var hint = document.getElementById("loadingTranslate");
                    if(hint){
                        hint.remove();
                    }
                }
                var btn = document.getElementById("google_translate_element");
                btn.onclick = function(){
                    if(transLoaded) return;
                    if(loading){
                        var flag = confirm("loading from " + domain + ", please wait, or change domain?");
                        if(flag){
                            newDomain = prompt("domain, default: " + domainDefault + ", now: " + domain);
                            if(newDomain){
                                domain = newDomain;
                                console.log(domain);
                                url = getUrl(domain);
                                loadJS(url, function(){
                                    localStorage.setItem("googleTransDomain", domain);
                                    removeHint()
                                    transLoaded = true;
                                });
                            }
                        }
                        return;
                    }
                    btn.innerHTML = '<span id="loadingTranslate"><img class="icon" src="/static/image/google_translate/translate.svg"/>Loading ...</span>';
                    loading = true;
                    loadJS(url, function(){
                        localStorage.setItem("googleTransDomain", domain);
                        removeHint()
                        transLoaded = true;
                    });
                }
                </script>
            
    
        <script src="/static/js/plugin_blog/main.js"></script>
    
        <script src="/static/js/theme_default/tocbot.min.js"></script>
    
        <script src="/static/js/theme_default/main.js"></script>
    
        <script src="/static/js/theme_default/viewer.min.js"></script>
    
        <script src="/static/js/prism.js"></script>
    
        <script src="/static/js/search/search_main.js"></script>
    
        <script src="/static/js/gitalk/gitalk.min.js"></script>
    
        <script src="/static/js/gitalk/main.js"></script>
    
        <link rel="stylesheet" href="/static/js/add_hint/style.css" type="text/css"/>
    
        <script src="/static/js/add_hint/main.js"></script>
    
        <script src="/static/js/custom.js"></script>
    
        <script src="/static/js/thumbs_up/main.js"></script>
    
</body>

</html>